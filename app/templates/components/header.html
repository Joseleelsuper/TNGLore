<header>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components/header.css') }}">
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script defer src="{{ url_for('static', filename='js/utils/header.js') }}"></script>
    
    {# Inline user data so header.js doesn't need a /api/user fetch #}
    <script>
    window.__USER__ = {
        isAdmin: {{ 'true' if current_user.is_authenticated and current_user.is_admin else 'false' }},
        pfp: {{ (current_user.pfp | tojson) if current_user.is_authenticated and current_user.pfp else 'null' }}
    };
    </script>
    
    <!-- Registro del Service Worker -->
    <script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('/sw.js');
        });
    }
    </script>
    
    <div class="logo">
        <a href="/inicio"><strong>TNGLore</strong></a>
    </div>
    <nav>
        <ul>
            <li><a href="/mi-coleccion"><strong>Mi Colecci√≥n</strong></a></li>
            <li><a href="/cofres"><strong>Mis Cofres</strong></a></li>
            <li><a href="/colecciones"><strong>Colecciones</strong></a></li>
            <li>
                <a href="/perfil">
                    <img id="profile-icon" src="https://www.whoseno.com/images/user-icon.png" alt="Perfil" class="profile-icon">
                </a>
            </li>
            <li id="admin-panel" style="display: none;">
                <a href="/admin"><strong>Panel de Administrador</strong></a>
            </li>
        </ul>
    </nav>
    <button class="nav-toggle">
        <span class="material-icons menu" style="font-size: 64px;">menu</span>
    </button>
</header>